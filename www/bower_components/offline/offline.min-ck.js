/*! offline 0.4.4 */(function(){var e,t,n,r,i,s,o;r=function(e,t){var n,r,i,s;s=[];for(r in t.prototype)try{i=t.prototype[r],null==e[r]&&"function"!=typeof i?s.push(e[r]=i):s.push(void 0)}catch(o){n=o}return s},e={},null==e.options&&(e.options={}),n={checks:{xhr:{url:function(){return"/offline-test-request/"+Math.floor(1e9*Math.random())}},image:{url:function(){return"http://dqakt69vkj09v.cloudfront.net/are-we-online.gif?_="+Math.floor(1e9*Math.random())}},active:"image"},checkOnLoad:!1,interceptRequests:!0},i=function(e,t){var n,r,i,s,o,u;for(n=e,u=t.split("."),r=s=0,o=u.length;o>s&&(i=u[r],n=n[i],"object"==typeof n);r=++s);return n},e.getOption=function(t){var r,s;return r=null!=(s=i(e.options,t))?s:i(n,t),"function"==typeof r?r():r},"function"==typeof document.addEventListener&&document.addEventListener("online",function(){return setTimeout(e.confirmUp,100)},!1),"function"==typeof document.addEventListener&&document.addEventListener("offline",function(){return e.confirmDown()},!1),e.state="up",e.markUp=function(){return e.trigger("confirmed-up"),"up"!==e.state?(e.state="up",e.trigger("up")):void 0},e.markDown=function(){return e.trigger("confirmed-down"),"down"!==e.state?(e.state="down",e.trigger("down")):void 0},s={},e.on=function(t,n,r){var i,o,u,l,c;if(o=t.split(" "),o.length>1){for(c=[],u=0,l=o.length;l>u;u++)i=o[u],c.push(e.on(i,n,r));return c}return null==s[t]&&(s[t]=[]),s[t].push([r,n])},e.off=function(e,t){var n,r,i,o,u;if(null!=s[e]){if(t){for(r=0,u=[];r<s[e].length;)o=s[e][r],n=o[0],i=o[1],i===t?u.push(s[e].splice(r,1)):u.push(r++);return u}return s[e]=[]}},e.trigger=function(e){var t,n,r,i,o,u,a;if(null!=s[e]){for(o=s[e],a=[],r=0,i=o.length;i>r;r++)u=o[r],t=u[0],n=u[1],a.push(n.call(t));return a}},t=function(e,t,n){var r,i;return r=function(){return e.status&&e.status<12e3?t():n()},null===e.onprogress?(e.addEventListener("error",n,!1),e.addEventListener("timeout",n,!1),e.addEventListener("load",r,!1)):(i=e.onreadystatechange,e.onreadystatechange=function(){return 4===e.readyState?r():0===e.readyState&&n(),"function"==typeof i?i.apply(null,arguments):void 0})},e.checks={},e.checks.xhr=function(){var n;return n=new XMLHttpRequest,n.offline=!1,n.open("GET",e.getOption("checks.xhr.url"),!0),t(n,e.markUp,e.markDown),n.send(),n},e.checks.image=function(){var t;return t=document.createElement("img"),t.onerror=e.markDown,t.onload=e.markUp,t.src=e.getOption("checks.image.url"),void 0},e.check=function(){return e.trigger("checking"),e.checks[e.getOption("checks.active")]()},e.confirmUp=e.confirmDown=e.check,e.onXHR=function(e){var t,n,i;return t=function(t,n){var r;return r=t.open,t.open=function(i,s,o,u,f){return e({type:i,url:s,async:o,flags:n,user:u,password:f,xhr:t}),r.apply(t,arguments)}},i=window.XMLHttpRequest,window.XMLHttpRequest=function(e){var n,r,s;return n=new i(e),t(n,e),s=n.setRequestHeader,n.headers={},n.setRequestHeader=function(e,t){return n.headers[e]=t,s.call(n,e,t)},r=n.overrideMimeType,n.overrideMimeType=function(e){return n.mimeType=e,r.call(n,e)},n},r(window.XMLHttpRequest,i),null!=window.XDomainRequest?(n=window.XDomainRequest,window.XDomainRequest=function(){var e;return e=new n,t(e),e},r(window.XDomainRequest,n)):void 0},o=function(){return e.getOption("interceptRequests")&&e.onXHR(function(n){var r;return r=n.xhr,r.offline!==!1?t(r,e.confirmUp,e.confirmDown):void 0}),e.getOption("checkOnLoad")?e.check():void 0},setTimeout(o,0),window.Offline=e}).call(this),function(){var e,t,n,r,i,s,o,u,a;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");r={},s=null,i=function(){var e;return null!=r.state&&Offline.trigger("reconnect:stopped"),r.state="inactive",r.remaining=r.delay=null!=(e=Offline.getOption("reconnect.initialDelay"))?e:3},t=function(){var e,t;return e=null!=(t=Offline.getOption("reconnect.delay"))?t:Math.min(Math.ceil(1.5*r.delay),3600),r.remaining=r.delay=e},o=function(){return"connecting"!==r.state?(r.remaining-=1,Offline.trigger("reconnect:tick"),0===r.remaining?u():void 0):void 0},u=function(){return"waiting"===r.state?(Offline.trigger("reconnect:connecting"),r.state="connecting",Offline.check()):void 0},e=function(){return r.state="waiting",Offline.trigger("reconnect:started"),s=setInterval(o,1e3)},a=function(){return clearInterval(s),i()},n=function(){return"connecting"===r.state?(Offline.trigger("reconnect:failure"),r.state="waiting",t()):void 0},r.tryNow=u,setTimeout(function(){return Offline.getOption("reconnect")!==!1?(i(),Offline.on("down",e),Offline.on("confirmed-down",n),Offline.on("up",a),Offline.reconnect=r):void 0},0)}.call(this),function(){var e,t,n,r,i,s;if(!window.Offline)throw new Error("Requests module brought in without offline.js");n=[],s=!1,r=function(e){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(s=!0),n.push(e)},i=function(e){var t,n,r,i,s,o,u,a,f;a=e.xhr,s=e.url,i=e.type,o=e.user,r=e.password,t=e.body,a.abort(),a.open(i,s,!0,o,r),f=a.headers;for(n in f)u=f[n],a.setRequestHeader(n,u);return a.mimeType&&a.overrideMimeType(a.mimeType),a.send(t)},e=function(){return n=[]},t=function(){var t,r,s,o,u,f;for(Offline.trigger("requests:flush"),s={},u=0,f=n.length;f>u;u++)r=n[u],o=r.url.replace(/(\?|&)_=[0-9]+/,function(e,t){return"?"===t?t:""}),s[""+r.type.toUpperCase()+" - "+o]=r;for(t in s)r=s[t],i(r);return e()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return s?(s=!1,e()):void 0}),Offline.on("up",t),Offline.on("down",function(){return s=!1}),Offline.onXHR(function(e){var t,n,i,s,o;return i=e.xhr,t=e.async,i.offline!==!1&&(n=function(){return r(e)},o=i.send,i.send=function(t){return e.body=t,o.apply(i,arguments)},t)?null===i.onprogress?(i.addEventListener("error",n,!1),i.addEventListener("timeout",n,!1)):(s=i.onreadystatechange,i.onreadystatechange=function(){return 0===i.readyState?n():4===i.readyState&&(0===i.status||i.status>=12e3)&&n(),"function"==typeof s?s.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:t,clear:e}):void 0},0)}.call(this),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");t='<div class="offline-ui"><div class="offline-ui-content"></div></div>',e='<a href class="offline-ui-retry"></a>',i=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.children[0]},s=r=null,n=function(e){return l(e),s.className+=" "+e},l=function(e){return s.className=s.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},u={},o=function(e,t){return n(e),null!=u[e]&&clearTimeout(u[e]),u[e]=setTimeout(function(){return l(e),delete u[e]},1e3*t)},a=function(e,t){var n,r,i,s,o,u;if(null==t&&(t=!1),0===e)return"now";n={d:86400,h:3600,m:60,s:1},r={s:"second",m:"minute",h:"hour",d:"day"},s="";for(o in n)if(i=n[o],e>=i)return u=Math.floor(e/i),t&&(o=" "+r[o],1!==u&&(o+="s")),""+u+o},c=function(){var o,u;return s=i(t),document.body.appendChild(s),null!=Offline.reconnect&&(s.appendChild(i(e)),o=s.querySelector(".offline-ui-retry"),u=function(e){return e.preventDefault(),Offline.reconnect.tryNow()},null!=o.addEventListener?o.addEventListener("click",u,!1):o.attachEvent("click",u)),n("offline-ui-"+Offline.state),r=s.querySelector(".offline-ui-content")},f=function(){return c(),Offline.on("up",function(){return l("offline-ui-down"),n("offline-ui-up"),o("offline-ui-up-2s",2),o("offline-ui-up-5s",5)}),Offline.on("down",function(){return l("offline-ui-up"),n("offline-ui-down"),o("offline-ui-down-2s",2),o("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return n("offline-ui-connecting"),l("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){return n("offline-ui-waiting"),l("offline-ui-connecting"),r.setAttribute("data-retry-in-seconds",Offline.reconnect.remaining),r.setAttribute("data-retry-in-abbr",a(Offline.reconnect.remaining)),r.setAttribute("data-retry-in",a(Offline.reconnect.remaining,!0))}),Offline.on("reconnect:stopped",function(){return l("offline-ui-connecting offline-ui-waiting"),r.setAttribute("data-retry-in-seconds",null),r.setAttribute("data-retry-in-abbr",null),r.setAttribute("data-retry-in",null)}),Offline.on("reconnect:failure",function(){return o("offline-ui-reconnect-failed-2s",2),o("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return o("offline-ui-reconnect-succeeded-2s",2),o("offline-ui-reconnect-succeeded-5s",5)})},null!=document.addEventListener?document.addEventListener("DOMContentLoaded",f,!1):(h=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&f(),"function"==typeof h?h.apply(null,arguments):void 0})}.call(this);