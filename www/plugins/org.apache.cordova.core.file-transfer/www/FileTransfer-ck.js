cordova.define("org.apache.cordova.core.file-transfer.FileTransfer",function(e,t,n){function u(e){var t=new o;t.lengthComputable=e.lengthComputable;t.loaded=e.loaded;t.total=e.total;return t}function a(e){var t=null;if(window.btoa){var n=document.createElement("a");n.href=e;var r=null,i=n.protocol+"//",s=i+n.host;if(n.href.indexOf(s)!==0){var o=n.href.indexOf("@");r=n.href.substring(i.length,o)}if(r){var u="Authorization",a="Basic "+window.btoa(r);t={name:u,value:a}}}return t}var r=e("cordova/argscheck"),i=e("cordova/exec"),s=e("./FileTransferError"),o=e("org.apache.cordova.core.file.ProgressEvent"),f=0,l=function(){this._id=++f;this.onprogress=null};l.prototype.upload=function(e,t,n,o,f,l){r.checkArgs("ssFFO*","FileTransfer.upload",arguments);var c=null,h=null,p=null,d=null,v=!0,m=null,g=null,y=a(t);if(y){f=f||{};f.headers=f.headers||{};f.headers[y.name]=y.value}if(f){c=f.fileKey;h=f.fileName;p=f.mimeType;m=f.headers;g=f.httpMethod||"POST";g.toUpperCase()=="PUT"?g="PUT":g="POST";if(f.chunkedMode!==null||typeof f.chunkedMode!="undefined")v=f.chunkedMode;f.params?d=f.params:d={}}var b=o&&function(e){var t=new s(e.code,e.source,e.target,e.http_status,e.body);o(t)},w=this,E=function(e){typeof e.lengthComputable!="undefined"?w.onprogress&&w.onprogress(u(e)):n&&n(e)};i(E,b,"FileTransfer","upload",[e,t,c,h,p,d,l,v,m,this._id,g])};l.prototype.download=function(t,n,o,f,l,c){r.checkArgs("ssFF*","FileTransfer.download",arguments);var h=this,p=a(t);if(p){c=c||{};c.headers=c.headers||{};c.headers[p.name]=p.value}var d=null;c&&(d=c.headers||null);var v=function(t){if(typeof t.lengthComputable!="undefined"){if(h.onprogress)return h.onprogress(u(t))}else if(o){var n=null;t.isDirectory?n=new(e("org.apache.cordova.core.file.DirectoryEntry")):t.isFile&&(n=new(e("org.apache.cordova.core.file.FileEntry")));n.isDirectory=t.isDirectory;n.isFile=t.isFile;n.name=t.name;n.fullPath=t.fullPath;o(n)}},m=f&&function(e){var t=new s(e.code,e.source,e.target,e.http_status,e.body);f(t)};i(v,m,"FileTransfer","download",[t,n,l,this._id,d])};l.prototype.abort=function(){i(null,null,"FileTransfer","abort",[this._id])};n.exports=l});